var d=document,BASE=location.protocol+"//"+location.host+"/",submit,submit_txt,submit_waiting_txt="Ждите",defAjaxUrl=BASE+"ajax/ajax.php",unexpectErrorMessage="К сожалению, произошла непредвиденная ошибка. Попробуйте повторить операцию позже или обратитесь в техническую поддержку.";function attachCheckboxGroupHandler(b){var a="input:checkbox";if(typeof b==="undefined"){b="div[id$=_checkbox_group]"}$(b).each(function(){var c=this;if(!$("input[type=hidden]",c).length){$(this).append($("<input/>").attr({type:"hidden",id:c.id.replace("_checkbox_group","")}))}var e=$("input[type=hidden]",c);e.change(function(){var f=$(this).val(),j=[],h;$(a,c).prop("checked",false);if(f==="all"){$(a,c).prop("checked",true);$(a+":first",c).change();return}f=f.split(",");for(var g in f){h=$(a+'[value="'+f[g]+'"]',c);if(h.length){j.push(f[g]);h.prop("checked",true)}}$(this).val(j.join(","));if($(a+":not(:checked)",c).length===0){$(a+"[value=all]",c).prop("checked",true)}}).change();$(c).on("change",a,function(){var f=[];if(this.value==="all"){$(a,c).not(this).prop("checked",$(this).is(":checked"))}$(a+":checked",c).not("[value=all]").each(function(){f.push(this.value)});$("input[type=hidden]",c).val(f.join(","))})})}$(function(){attachCheckboxGroupHandler()});function isset(a){return !(window[a]===undefined||window[a]===null)}function empty(b){if(b===""||b===0||b==="0"||b==="0.0"||b===null||b===false||b===undefined){return true}if(typeof b=="object"){for(var a in b){return false}return true}return false}function intval(a){a=parseInt(a);if(isNaN(a)){return 0}return a}function getFormData(b){var a={};$("input,select,textarea",b).each(function(){var f=this.name||this.id,c=($(this).attr("type")==="checkbox"||$(this).attr("type")==="radio");if(!f||(c&&!$(this).prop("checked"))||$(this).attr("type")==="button"||$(this).attr("type")==="submit"||!!$(this).attr("disabled")||!!$(this).prop("disabled")){return}var e=$(this).val();if(!e&&c){e="on"}if(f.indexOf("[]")>0){f=f.replace("[]","");if(!$.isArray(a[f])){a[f]=[]}a[f].push(e)}else{a[f]=e}});return a}function clearForm(a){$("input,select,textarea",a).each(function(){var c=this.type,b=this.tagName.toLowerCase();if(c=="text"||c=="hidden"||c=="password"||b=="textarea"){this.value=""}else{if(c=="checkbox"||c=="radio"){this.checked=false}else{if(b=="select"){this.selectedIndex=-1}}}})}var wait={show:function(){$("#loading").center().show()},hide:function(){$("#loading").hide()}};var overlay={show:function(){if(!$("#overlay").length){$("body").append('<div id="overlay"></div>')}if($.browser.msie){$("select").css("visibility","hidden")}$("#overlay").removeClass("dis")},hide:function(){if($.browser.msie){$("select").css("visibility","visible")}$("#overlay").addClass("dis")}};function inputNumber(a){$(a).bind("keydown change",function(){var b=$(this);setTimeout(function(){var c=parseInt(b.val());b.val(isNaN(c)?"":c)},0)})}var cursorPosition={get:function(a){if("selectionStart" in a){return a.selectionStart}return false},set:function(a,b){if("setSelectionRange" in a){a.setSelectionRange(b,b)}}};function formatNumber(a){if(typeof a==="undefined"){return 0}var c="";a=(a+"").replace(/ /g,"");if(a.length<4){return a}for(var b=a.length-3;b>0;b=b-3){c=a.substr(b,3)+" "+c}c=a.substr(0,3+b)+" "+c;return $.trim(c)}function formatNumberField(a){$(a).each(function(){var b=$(this).val();$(this).keypress(function(f){var c=f.which;return(c==0||c==8||c==13||c==9||c==37||c==39||(c>47&&c<58))}).keyup(function(){if(b===this.value){return}var c=cursorPosition.get(this);c-=this.value.substr(0,c).split(" ").length-1;this.value=formatNumber(this.value);cursorPosition.set(this,c+this.value.substr(0,c).split(" ").length-1);b=this.value}).keyup()})}function formatDate(b){if(!b){return false}var a=function(c){return(c<10)?"0"+c:c};return[b.getFullYear(),a(b.getMonth()+1),a(b.getDate())].join("-")+" "+[a(b.getHours()),a(b.getMinutes()),a(b.getSeconds())].join(":")}function dateFromStr(c){if(c==="0000-00-00"||c==="0000-00-00 00:00:00"){return false}var e=[],b=[0,0,0],a=c.split(" ");e=a[0].split("-");if(e.length!=3){return false}if(a.length>1){b=a[1].split(":");if(b.length!=3){return false}}return new Date(e[0],e[1]-1,e[2],b[0],b[1],b[2])}function maxLengthNotifier(c){var c=$(c),a=c.attr("maxlength");if(!a){return}var b=$("<span/>").css("padding","5px");c.bind("keyup mousedown blur",function(){var e=a-c.val().length;b.text(e).css("color",e<=0?"#BF1600":"#009933")}).after(b).keyup()}function upload_thumb(a){if(a.match(/\.swf$/i)){return'<object width="250" height="100" data="/upload/'+a+'" type="application/x-shockwave-flash"></object>'}if(a.match(/\.(jpg|jpeg|png|gif)$/i)){return'<img src="'+a+'" width="100" alt="" />'}return'<span style="padding-right:10px">'+a+"</span>"}if(!jQuery.browser){var uaMatch=function(b){b=b.toLowerCase();var a=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return{browser:a[1]||"",version:a[2]||"0"}},matched=uaMatch(navigator.userAgent),browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}jQuery.browser=browser}function highlight(a,b){return a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+String(b).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")};
